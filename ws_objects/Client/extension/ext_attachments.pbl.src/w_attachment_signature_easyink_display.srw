$PBExportHeader$w_attachment_signature_easyink_display.srw
forward
global type w_attachment_signature_easyink_display from w_window_base
end type
type pb_done from u_picture_button within w_attachment_signature_easyink_display
end type
type st_title from statictext within w_attachment_signature_easyink_display
end type
type ole_signature from u_ole_easyink_signature within w_attachment_signature_easyink_display
end type
end forward

global type w_attachment_signature_easyink_display from w_window_base
boolean titlebar = false
boolean controlmenu = false
boolean minbox = false
boolean maxbox = false
boolean resizable = false
windowtype windowtype = response!
pb_done pb_done
st_title st_title
ole_signature ole_signature
end type
global w_attachment_signature_easyink_display w_attachment_signature_easyink_display

type variables
long 					bitmap_width,bitmap_height
string				bitmap_file
string 				ink
u_component_attachment attachment
end variables

on w_attachment_signature_easyink_display.create
int iCurrent
call super::create
this.pb_done=create pb_done
this.st_title=create st_title
this.ole_signature=create ole_signature
iCurrent=UpperBound(this.Control)
this.Control[iCurrent+1]=this.pb_done
this.Control[iCurrent+2]=this.st_title
this.Control[iCurrent+3]=this.ole_signature
end on

on w_attachment_signature_easyink_display.destroy
call super::destroy
destroy(this.pb_done)
destroy(this.st_title)
destroy(this.ole_signature)
end on

event open;call super::open;string ls_title,ls_file

attachment = message.powerobjectparm

ls_title = "Signature by "
ls_title += attachment.originator.user_full_name
ls_title += " on " + string(attachment.attachment_date, "[shortdate] [time]")
st_title.text = ls_title

postevent("post_open")
end event

event post_open;long ll_sts
boolean lb_size
blob lbl_attachment

if isnull(bitmap_height) or bitmap_height <= 0 or isnull(bitmap_width) or bitmap_width <= 0 then
	lb_size = false
else
	lb_size = true
end if

// get the attachment
ll_sts = attachment.get_attachment_blob(lbl_attachment)
If ll_sts <= 0 Then
	log.log(this,"xx_render()","failed to get signature attachment from database / file",3)
	pb_done.event clicked()
	return
Else
	ole_signature.object.imagedata = lbl_attachment
End If


end event

type pb_epro_help from w_window_base`pb_epro_help within w_attachment_signature_easyink_display
end type

type st_config_mode_menu from w_window_base`st_config_mode_menu within w_attachment_signature_easyink_display
end type

type pb_done from u_picture_button within w_attachment_signature_easyink_display
integer x = 2569
integer y = 1552
integer taborder = 10
string picturename = "button26.bmp"
string disabledname = "b_push26.bmp"
end type

event clicked;call super::clicked;Close(parent)
end event

type st_title from statictext within w_attachment_signature_easyink_display
integer width = 2921
integer height = 248
boolean bringtotop = true
integer textsize = -14
integer weight = 700
fontcharset fontcharset = ansi!
fontpitch fontpitch = variable!
fontfamily fontfamily = swiss!
string facename = "Arial"
long textcolor = 33554432
long backcolor = 33538240
boolean enabled = false
alignment alignment = center!
boolean focusrectangle = false
end type

type ole_signature from u_ole_easyink_signature within w_attachment_signature_easyink_display
integer x = 590
integer y = 844
integer width = 1765
integer height = 444
integer taborder = 20
boolean bringtotop = true
string binarykey = "w_attachment_signature_easyink_display.win"
end type


Start of PowerBuilder Binary Data Section : Do NOT Edit
0Fw_attachment_signature_easyink_display.bin 
2100000a00e011cfd0e11ab1a1000000000000000000000000000000000003003e0009fffe000000060000000000000000000000010000000100000000000010000000000200000001fffffffe0000000000000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdfffffffefffffffefffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff006f00520074006f004500200074006e00790072000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000050016ffffffffffffffff0000000100000000000000000000000000000000000000000000000000000000ba3fb87001c2843000000003000000400000000000500003004f0042005800430054005300450052004d0041000000000000000000000000000000000000000000000000000000000000000000000000000000000102001affffffff00000002ffffffff000000000000000000000000000000000000000000000000000000000000000000000000fffffffe0000000000000000004200500043004f00530058004f00540041005200450047000000000000000000000000000000000000000000000000000000000000000000000000000000000001001affffffffffffffff000000034d17496d11d47da3100070927ca0a95a00000000ba3fb87001c28430ba3fb87001c28430000000000000000000000000006f00430074006e006e00650073007400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001020012ffffffffffffffffffffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c00000000fffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
2Affffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000300000027e500000b79ffff000b000500130013800080000008006e006500720070006e006900660074006f006f006500740000007200620070005f006d006500720070006e006900720074006e00650068006400610072006500700000006d00620072005f006e00650062007200740075006f00740064006e0077006f0000006e00620070005f006d006500720072006e0075006200740074006e006f0070007500700000006d00620072005f006e006500650073006600740063006f0073007500700000006d00620072005f006e00650073007600720063006c006f0000006c00620070005f006d006200730062006e0074006f006f00740000006d00620070005f006d006200730064006e0061007200640067006f00720000007000620070005f006d006200730064006e00610072006500670074006e0072006500700000006d00620073005f006e006200720064006700610065006c007600610000006500620070005f006d006200730064006e006100720077006700740069006900680000006e00620070005f006d006200730065006e0064006e00630073006f0072006c006c00700000006d00620073005f006e00620069006b006c006c006f0066007500630000007300620070005f006d00620073006c006e006e0069006400650077006f0000006e00620070005f006d00620073006c006e006e0069000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1Fw_attachment_signature_easyink_display.bin 
End of PowerBuilder Binary Data Section : No Source Expected After This Point
