<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="PROBLEM" content="SQL Server Performance - Memory Issues" />
    <meta name="TITLE" content="SQL Server Performance - Memory Issues" />
    <meta name="DESCRIPTION" content="This solution covers the memory issues that can impact SQL server performance." />
    <meta name="PROBLEM_TYPE" content="Problem Solution" />
    <meta name="AUDIENCE" content="sa" />
	<meta name="KEYWORDS" content="ephr10002952 10087 SQL Server Performance Memory" />
    <link rel="stylesheet" type="text/css" href="images/common.css" />
    
    <title>SQL Server Performance - Memory Issues</title>
</head>

<script type="text/javascript">function popup(image, width, height) { window.open(image, 'popup', 'width=' + width + ',height=' + height + ',scrollbars=yes'); }</script>

<body>
    <img src="images/logo.gif" border="0" alt="RightAnswers, Inc" /><br />
    <br />
    <hr />
    
    <!-- Begin Solution -->

	<div class="solutionPath"><b>Solution Path:</b> Supporting encounterPRO ver 5 &gt; Db Mod Levels</div>
<hr />
<h2>SQL Server Performance - Memory Issues</h2><table cellpadding="5" cellspacing="0" border="0" class="solutionTable">
<tr>
<td class="sectionLabel">
Cause:
</td>
<td class="sectionContent">
SQL Server needs enough memory or performance will suffer. Even if the overall system page fault rate is nominal, SQL Server may still not have enough memory to perform efficiently.
</td>
</tr>
<tr>
<td class="sectionLabel">
Solution:
</td>
<td class="sectionContent">
Set maximum memory slider all the way to the right on the SQL Server Properties/Memory screen in the SQL Enterprise Manager. If this doesn't work, have more RAM installed. If this does not work, you should consider either SQL 2005 or SQL 2000 Enterprise Edition.
</td>
</tr>
<tr>
<td class="sectionLabel">
Details:
</td>
<td class="sectionContent">
<FONT face=sans-serif size=2>  <p> 
If SQL Server does not have enough memory, set the maximum memory slider all the way to the right on the SQL Server Properties/Memory screen in the SQL Enterprise Manager. If SQL takes so much memory that other parts of windows suffer, or if SQL takes as much memory as it can but still doesn't have enough, then the server probably needs to have more RAM installed. </p>
 
  <p> 
SQL 2000 Standard will not be allowed to consume more than about 1.7G of RAM. If SQL 2000 is already using that much but still suffers from depressed cache hit ratios and poor performance, then the customer should consider either SQL 2005 or SQL 2000 Enterprise Edition. </p>
 
  <p> 
Symptoms: <br /> 
There are two things to check. Both can be found in the performance monitor. <br /> 
1) Just like any process, does SQL Server have enough working set to operate without paging? <br /> 
2) Does SQL Server have enough internal cache to not be recompiling queries all the time? <br /> 
To check for the first, look at the Memory object - Pages/Sec counter. It should be at zero with occasional spikes. <br /> 
To check for the second, look at the following counters: <br /> 
Object <br /> 
Counter <br /> 
Look For <br /> 
SQL Server:Buffer Manager <br /> 
Buffer cache hit ratio <br /> 
High 90s <br /> 
SQL Server:Cache Manager <br /> 
Cache Hit Ratio - Adhoc Sql Plans <br /> 
High 90s <br /> 
SQL Server: Cache Manager <br /> 
Cache Hit Ratio - Prepared Sql Plans <br /> 
High 90s <br /> 
SQL Server: Cache Manager <br /> 
Cache Hit Ratio - Trigger Plans <br /> 
High 90s <br /> 
SQL Server: Cache Manager <br /> 
Cache Hit Ratio - Procedure Plans <br /> 
90+ <br /> 
SQL Server: Cache Database <br /> 
Log Cache Hit Ratio - &lt;cpr database&gt; <br /> 
80+ </p>
 
  <p> 
Not having the numbers high enough isn't necessarily a problem by itself. That is, if the system is performing well and these numbers are lower than they should be, don't worry about it. If the system is not performing well and these numbers are too low, then giving more RAM to SQL server is definitely something to try. </p>
 
  <p> 
Also, not having enough ram will show up in a SQL trace because it is a likely cause of queries taking too long when the # of reads isn't elevated and the processor and disk queue are nominal. </p>
 
  <p> 
Article created on 12/16/2004 by Mark.Copenhaver </p>
 
  <p> 
Article last updated on 7/9/2007 by Mark.Copenhaver</FONT> </p>

</td>
</tr>
<tr>
<td class="sectionLabel">
Symptoms:
</td>
<td class="sectionContent">

</td>
</tr>
</table>
<br />
<hr />
<table cellpadding="0" cellspacing="0" border="0" width="100%">
<tr>
<td>
<b>ID:</b> 040822523163774</td>
<td style="text-align: right;">
<b>Last Modified:</b> 08/23/08 06:22:46 PM</td>
</tr>
</table>

    
    <!-- End Solution -->
	<br />
	<hr style="height: 5px" />
	<div class="subtext"><img src="images/CC3_logo.png" hspace=3 px/>Copyright &#0169 2008-2010 by the EncounterPRO Open Source Project. You may distribute it and/or modify it under the terms of the Creative Commons Attribution License, version 3.0 or later. All trademarks within this guide belong to their legitimate owners. Please attribute the EncounterPRO Open Source Project as the creator of this work. Please include this URL for the Work: encounterpro.org <br /> <a href=http://www.librarycopyright.net/wiki/index.php?title="How_to_attribute_a_Creative_Commons_licensed_work" target="_blank">Additional Instruction</a></div> 
       
		
</body>
</html>